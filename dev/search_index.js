var documenterSearchIndex = {"docs":
[{"location":"api/#Test","page":"API Reference","title":"Test","text":"","category":"section"},{"location":"api/#FinancialMarketSimulation.ExcessReturnProcess","page":"API Reference","title":"FinancialMarketSimulation.ExcessReturnProcess","text":"ExcessReturnProcess\n\nCalculates the excess return of an asset over a risk-free rate: Ret = (St / S{t-1} - 1) - (r{t-1} * dt)\n\n\n\n\n\n","category":"type"},{"location":"api/#FinancialMarketSimulation.GenericSDEProcess","page":"API Reference","title":"FinancialMarketSimulation.GenericSDEProcess","text":"GenericSDEProcess{F1, F2}\n\nA flexible SDE process: dXt = μ(t, Xt, deps...)dt + σ(t, Xt, deps...) ⋅ dWt. Now supports dependencies: a list of other process names (symbols) whose values will be passed to the drift/diffusion functions.\n\n\n\n\n\n","category":"type"},{"location":"api/#FinancialMarketSimulation.GrossReturnProcess","page":"API Reference","title":"FinancialMarketSimulation.GrossReturnProcess","text":"GrossReturnProcess\n\nCalculates the gross return (price relative) of an asset: Gt = St / S_{t-1}\n\n\n\n\n\n","category":"type"},{"location":"api/#FinancialMarketSimulation.InflationBondProcess","page":"API Reference","title":"FinancialMarketSimulation.InflationBondProcess","text":"InflationBondProcess{R, I}\n\nHolds reference to Rate, Inflation, and a vector of Market Risk Factors.\n\n\n\n\n\n","category":"type"},{"location":"api/#FinancialMarketSimulation.MarketConfig","page":"API Reference","title":"FinancialMarketSimulation.MarketConfig","text":"MarketConfig\n\nThe master configuration for the simulation.\n\n\n\n\n\n","category":"type"},{"location":"api/#FinancialMarketSimulation.NominalBondProcess","page":"API Reference","title":"FinancialMarketSimulation.NominalBondProcess","text":"NominalBondProcess{R}\n\nHolds reference to the Rate Process and a vector of Market Risk Factors.\n\nFields\n\nname::Symbol\nrate_process::AbstractMarketProcess\nT::Float64: Time to maturity of the bond (in years) from initial time t = 0\nmarket_risk_factors::Vector{Float64}\n\n\n\n\n\n","category":"type"},{"location":"api/#FinancialMarketSimulation.SimpleReturnProcess","page":"API Reference","title":"FinancialMarketSimulation.SimpleReturnProcess","text":"SimpleReturnProcess\n\nCalculates the simple (discrete) return of an asset: Rt = (St / S_{t-1}) - 1\n\n\n\n\n\n","category":"type"},{"location":"api/#FinancialMarketSimulation.SimulationWorld","page":"API Reference","title":"FinancialMarketSimulation.SimulationWorld","text":"SimulationWorld\n\nHolds the simulated paths in a memory-efficient ComponentArray. T is the element type (Float64). C is the specific ComponentArray type (generated at runtime).\n\n\n\n\n\n","category":"type"},{"location":"api/#FinancialMarketSimulation.VasicekProcess","page":"API Reference","title":"FinancialMarketSimulation.VasicekProcess","text":"VasicekProcess\n\nA specialized Ornstein-Uhlenbeck process: drt = κ(θ - rt)dt + σ dW_t\n\nFields\n\nname::Symbol\nκ::Float64\nθ::Float64\nσ::Float64\ninitial_value::Float64\nshock_idx::Int64\n\n\n\n\n\n","category":"type"},{"location":"api/#FinancialMarketSimulation.get_time_index-Tuple{MarketConfig, Real}","page":"API Reference","title":"FinancialMarketSimulation.get_time_index","text":"Calculates the single index corresponding to a specific time.\n\n\n\n\n\n","category":"method"},{"location":"api/#FinancialMarketSimulation.get_time_indices-Tuple{MarketConfig, Tuple{Real, Real}}","page":"API Reference","title":"FinancialMarketSimulation.get_time_indices","text":"Calculates the indices in the data array corresponding to the requested time range.\n\n\n\n\n\n","category":"method"},{"location":"api/#FinancialMarketSimulation.plot_simulation-Tuple{SimulationWorld}","page":"API Reference","title":"FinancialMarketSimulation.plot_simulation","text":"plot_simulation(world; ...)\n\nPlots simulation results with flexible options.\n\nArguments\n\nvars: List of symbols to plot (e.g. [:r, :S]). Defaults to all.\ntime_range: Tuple (start, end) for the trajectory x-axis.\noutput_dir: Folder to save plots.\nplot_traj: Bool, show trajectories (default true).\nplot_dist: Bool, show distribution histogram (default true).\ndist_time: Real, specific time for the histogram. Defaults to time_range[2].\n\n\n\n\n\n","category":"method"},{"location":"api/#FinancialMarketSimulation.shock_indices-Tuple{AbstractMarketProcess}","page":"API Reference","title":"FinancialMarketSimulation.shock_indices","text":"shock_indices(p::AbstractMarketProcess) -> Vector{Int}\n\nInterface method to retrieve the shock indices used by a process. Default implementation assumes the struct has a field shock_idxs. Future developers can override this if their struct uses a different field name.\n\n\n\n\n\n","category":"method"},{"location":"api/#FinancialMarketSimulation.simulate!-Tuple{AbstractMatrix, ExcessReturnProcess, SimulationWorld}","page":"API Reference","title":"FinancialMarketSimulation.simulate!","text":"Simulate Excess Returns. Ret = (St / S{t-1} - 1) - (r{t-1} * dt)\n\n\n\n\n\n","category":"method"},{"location":"api/#FinancialMarketSimulation.simulate!-Tuple{AbstractMatrix, GenericSDEProcess, SimulationWorld}","page":"API Reference","title":"FinancialMarketSimulation.simulate!","text":"simulate!(storage, process, world)\n\nRuns the Euler-Maruyama scheme for a GenericSDEProcess. Supports dependency injection: passes values of dependent paths to drift/diffusion.\n\n\n\n\n\n","category":"method"},{"location":"api/#FinancialMarketSimulation.simulate!-Tuple{AbstractMatrix, GrossReturnProcess, SimulationWorld}","page":"API Reference","title":"FinancialMarketSimulation.simulate!","text":"Simulate Gross Returns. Gt = St / S_{t-1}\n\n\n\n\n\n","category":"method"},{"location":"api/#FinancialMarketSimulation.simulate!-Tuple{AbstractMatrix, SimpleReturnProcess, SimulationWorld}","page":"API Reference","title":"FinancialMarketSimulation.simulate!","text":"Simulate Simple Returns. Rt = St / S_{t-1} - 1\n\n\n\n\n\n","category":"method"},{"location":"api/#FinancialMarketSimulation.simulate!-Tuple{AbstractMatrix, VasicekProcess, SimulationWorld}","page":"API Reference","title":"FinancialMarketSimulation.simulate!","text":"simulate!(storage, process::VasicekProcess, world)\n\nOptimized Euler-Maruyama stepper for the Vasicek model.\n\n\n\n\n\n","category":"method"},{"location":"api/#FinancialMarketSimulation.simulate_correlated_shocks-Tuple{Int64, Int64, Float64, AbstractMatrix}","page":"API Reference","title":"FinancialMarketSimulation.simulate_correlated_shocks","text":"simulate_correlated_shocks(sims, steps, dt, corr_matrix)\n\nGenerates correlated Brownian motions dW using Cholesky decomposition. Dimensions: (sims, steps, n_shocks)\n\n\n\n\n\n","category":"method"},{"location":"models/#Models-and-Mathematics","page":"Models & Math","title":"Models & Mathematics","text":"This package provides a suite of Stochastic Differential Equations (SDEs) and derivative pricing models.","category":"section"},{"location":"models/#Stochastic-Processes","page":"Models & Math","title":"Stochastic Processes","text":"TODO","category":"section"},{"location":"#FinancialMarketSimulation.jl","page":"Home","title":"FinancialMarketSimulation.jl","text":"A flexible, high-performance framework for simulating financial markets using Stochastic Differential Equations (SDEs).","category":"section"},{"location":"#Features","page":"Home","title":"Features","text":"Modular Design: Mix and match building blocks (Rates, Stocks, Bonds, Inflation).\nCorrelated Shocks: Simulate multi-asset markets with arbitrary correlation matrices.\nContext-Aware: Create processes that depend on others (e.g., Stochastic Volatility, CPI).\nVisualization: Built-in plotting for trajectories and distributions.","category":"section"},{"location":"#Installation","page":"Home","title":"Installation","text":"using Pkg\nPkg.add(url=\"https://github.com/sliemelela/FinancialMarketSimulation.jl\")","category":"section"},{"location":"#Quick-Start","page":"Home","title":"Quick Start","text":"using FinancialMarketSimulation\n\n# Define Physics (Interest Rate)\nrate = VasicekProcess(:r, 0.3, 0.05, 0.02, 0.05, 1)\n\n# Build World (1 Year, 100 Steps)\nconfig = MarketConfig(sims=1000, T=1.0, M=100, processes=[rate])\nworld  = build_world(config)\n\n# Plot\nplot_simulation(world)","category":"section"},{"location":"#How-to-use-this-manual","page":"Home","title":"How to use this manual","text":"Want to know how to use this package? Visit the Tutorial to get started.\nWant to know how the processes you simulate work in more detail?   Visit the Models & Math section.\nThe API reference can be found here.","category":"section"},{"location":"tutorial/#Tutorial:-Building-a-Financial-Market","page":"Tutorial","title":"Tutorial: Building a Financial Market","text":"This guide will walk you through building a simulation, starting from a single asset and ending with a full economy including inflation, bonds, and derivatives.\n\nThe general idea of the package is to follow the following steps:\n\nSpecify a process that you would like to simulate using either some SDE or some built in process  that is given by this package.\nSpecify the configuration that are needed to run the simulation, e.g. the amount of paths, the  amount of timesteps etc.\nRun the builder command.\nPlot using built in plotter.\n\nAny analysis that one wants to do with the generated paths can be done by simply extracting the paths from the object in which everything is stored. Let us make this concrete by building up a more sophisticated model step by step.","category":"section"},{"location":"tutorial/#Level-1:-The-Basics-(Interest-Rates)","page":"Tutorial","title":"Level 1: The Basics (Interest Rates)","text":"The package gives the user the option to model some stochastic process by specifying some generic Stochastic Differential Equations (SDE's). On top of this, the package also has some built in stochastic processes, like the Vasicek process. To get an overview of all built in stochastic processes, visit the Models & Math section. We will first how how to built the latter in the code example below.\n\nTo create a Vasicek process, we will use the VasicekProcess struct. This struct accepts the parameters kappa, theta and sigma such that the process follows the SDE\n\n    dr_t = kappa(theta - r_t) dt + sigma_r dW_t^1\n\nwhere dW_t^1 is some Brownian motion. Below is an actual written out example.\n\nusing FinancialMarketSimulation\n\n# dr_t = κ(θ - r_t)dt + σ dW_t\n# κ=0.3, θ=0.05, σ_r =0.02, r0=0.05\nr_model = VasicekProcess(:r, 0.3, 0.05, 0.02, 0.05, 1)\n\n# We can specify Time (T) and Amount of Intervals (M), and dt is calculated automatically.\nconfig = MarketConfig(\n    sims = 500,\n    T    = 1.0,\n    M    = 100,\n    processes = [r_model]\n)\n\nworld = build_world(config)\nplot_simulation(world)\n\nNote that the last parameter 1 in the VasicekProcess struct specifies 'which shock' to use, i.e. by writing down 1, we create a Brownian shock that we index by the number 1 that is used to generate the process.\n\nTo access the paths, use\n\nr_path = world.paths.r\n\nwhere r comes from the name :r that you supplied the VasicekProcess struct with when it was initialized.","category":"section"},{"location":"tutorial/#Level-2:-Adding-a-Correlated-Stock","page":"Tutorial","title":"Level 2: Adding a Correlated Stock","text":"Now let's add a stock process. We want the stock market to be negatively correlated with interest rate shocks (e.g., rates up, stocks down). We will be creating the stock process using the SDE\n\n    dS_t = mu S_t dt + sigma S_t dW_t^2\n\nTo create the stochastic process using this SDE, we use the GenericSDEProcess struct. As opposed to before, we cannot directly supply this struct with the parameters mu and sigma since it has to be able to create any (Markovian) SDE. To circumvent this, we supply the struct with two functions that specify the drift and diffusion terms in the SDE, which correspond to\n\n    (t S) mapsto mu S \n    (t S) mapsto sigma S\n\nrespectively. Additionally, note that we are now using some other Brownian motion dW_t^2 that must be correlated with dW_t^1, i.e. we want to specify textCordW_t^1 dW_t^2 = rho in mathbbR. Let us see how this works in practice.\n\n# Define Stock Process\n# dS = μ * S dt + σ * S dW_2 with μ = 0.05 and σ = 0.2 and initial value of 100.\nstock = GenericSDEProcess(:S, (t,x)->0.05*x, (t,x)->0.2*x, 100.0, [2])\n\n# Define Correlation Matrix\n# Correlation between Shock 1 (Rate) and Shock 2 (Stock) is -0.4\nρ = [ 1.0 -0.4;\n     -0.4  1.0]\n\nconfig = MarketConfig(\n    sims=500, T=1.0, M=100,\n    processes=[r_model, stock],\n    correlations=ρ\n)\n\nworld = build_world(config)\n\nNow note that we have supplied the GenericSDEProcess with a [2] as the final argument. Using 2 creates another Brownian shock that is correlated with 1 using the specified correlation matrix rho. The reason for supplying it as a vector [2], however, is that in the generic case we might want to use more than one shock. So suppose we would like to create a stochastic process using the SDE\n\n    dS_t = mu S_t dt + sigma_2 S_t dW_t^2 + sigma_3 S_t dW_t^3\n\nthen we can rewrite this to\n\n    dS_t = mu S_t dt\n        + beginpmatrix sigma_2 S_t  sigma_3 S_t endpmatrix\n          beginpmatrix dW_t^2  dW_t^3 endpmatrix\n\nSo in this (more complicated) case, the drift function would remain the same while the diffusion function would be\n\n    (t S) mapsto beginpmatrix sigma_2 S  sigma_3 S endpmatrix\n\nThe code would be then (for example) be\n\n# Define Stock Process\nstock = GenericSDEProcess(:S, (t,x)->0.05*x, (t,x)->(0.2*x, 0.3*x), 100.0, [2, 3])\n\n# Define Correlation Matrix\nρ = [ 1.0 -0.4 -0.2;\n     -0.4  1.0 0.5;\n     -0.2  0.5 1.0]\n\nconfig = MarketConfig(\n    sims=500, T=1.0, M=100,\n    processes=[r_model, stock],\n    correlations=ρ\n)\n\nworld = build_world(config)","category":"section"},{"location":"tutorial/#Level-3:-Bonds-and-Market-Price-of-Risk","page":"Tutorial","title":"Level 3: Bonds & Market Price of Risk","text":"It can also be of interest to model both nominal and inflation linked bonds. In both cases we must specify the so called factor loadings phi that are linked to the market price of risk lambda via the formula lambda = rho phi.","category":"section"},{"location":"tutorial/#Nominal-Bonds","page":"Tutorial","title":"Nominal Bonds","text":"To create nominal bonds, we must supply it with the underlying interest rate r_t and the factor loadings phi_r phi_S corresponding to the interest rate r_t and stock process S respectively. From here, the implementation is quite simple:\n\n# Risk Factors: [ϕ_rate, ϕ_stock]\n# We assume a negative risk premium for both.\nmarket_risk = [-0.1, -0.2]\nT_mat = 10 # Time to maturity from t=0.\n\n# Nominal Bond P_N depends on :r\nbond = NominalBondProcess(:P_N, r_model, T_mat, market_risk)\n\nconfig = MarketConfig(sims=500, T=1.0, M=100, processes=[r_model, stock, bond], correlations=ρ)\nworld = build_world(config)\n\nNote that we do not need to specify a \"new\" shock as the bond process is completely determined by r_t and the market prices of risk.","category":"section"},{"location":"tutorial/#Inflation-Linked-Bonds","page":"Tutorial","title":"Inflation Linked Bonds","text":"Similarly, to create inflation linked bonds we must also create an inflation process and a CPI (Consumer Price Index) process. The inflation process pi_t is simple to instantiate:\n\npi_model = VasicekProcess(:pi, 0.1, 0.02, 0.01, 0.02, 3)\n\nThe CPI process however, can be a bit more cumbersome. Let us treat the case of the CPI process Pi_t being\n\ndPi_t = Pi_t pi_t dt\n\nA fair question that will most likely come up is: how do we give the generic SDE struct access to other stochastic processes? The answer is simple, we use functions that use more arguments! The drift process is now simply\n\n(t Pi pi) mapsto Pi pi\n\nTo make sure pi in the formula corresponds to the path pi_t we actually created before, we provide an extra argument to the GenericSDEProcess as follows:\n\ncpi_drift(t, Pi, pi_val) = Pi * pi_val\ncpi_diff(t, Pi, pi_val)  = 0.0\n\ncpi_model = GenericSDEProcess(\n    :CPI, cpi_drift, cpi_diff, 100.0,\n    Int[],   # No Shocks\n    [:pi]    # Dependency: Reads the :pi path\n)\n\nWe can finally create the inflation linked bond using\n\nmprs = [-0.1, -0.2, -0.1]\nT_mat = 10.0\ninfl_bond = InflationBondProcess(:P_I, r_model, pi_model, :CPI, T_mat, mprs)\nconfig = MarketConfig(\n    sims=100, T=1.0, dt=0.01, M=100,\n    processes=[r_model, stock, bond, pi_model, cpi_model, infl_bond]\n)\n\nNote that we have to specify another factor loading corresponding to the shock of the inflation process. Also note that the order of processes in MarketConfig matters. For example, since cpi_model is depends on both r_model and pi_model, it must be supplied later in the processes vector. Something similar holds for infl_bond and bond.","category":"section"},{"location":"tutorial/#Level-4:-Simple-and-Excess-Returns","page":"Tutorial","title":"Level 4: Simple and Excess Returns","text":"Given an already existing process, we can easily create the simple, gross and excess return process by\n\n# Simple Return of Stock\nret_S = SimpleReturnProcess(:R_S, :S)\n\n# Excess Return of Stock over Rate\nex_ret_S = ExcessReturnProcess(:Re_S, :S, :r)\n\n# Gross return of Stock\ngross_S = GrossReturnProcess(:G_S, :S)","category":"section"},{"location":"tutorial/#Level-5:-Analysis-and-Plotting","page":"Tutorial","title":"Level 5: Analysis & Plotting","text":"We can zoom in on specific events or check distributions at specific times.\n\n# Plot only the distribution at the halfway point (t=0.5)\nplot_simulation(world,\n    plot_traj=false,\n    plot_dist=true,\n    dist_time=0.5\n)\n\n# Plot the trajectories of everything between t=0.5 and t=1.0\nplot_simulation(world,\n    plot_traj=true,\n    plot_dist=false,\n    time_range=(0.5, 1.0)\n)\n\n# Plot full trajectories and distributions at the final time and  just rates and the nominal bond.\nplot_simulation(world, vars=[:r, :P_N])","category":"section"}]
}
